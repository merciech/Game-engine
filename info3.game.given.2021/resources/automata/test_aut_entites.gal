Epee(Init){

* (Init):
|	Cell( H , @ ) ? pick():(picked @)
|	Cell( H , # ) ? pick():(picked #)
|   
|   True ? : ( Init )

*( Selected @ ) :
|

*( Selected # ) :
|

*( Stored ) :
|

*( to_pick ) :
|

*(picked @)
|   Pressed( TO_STORE_1 )?:(Stored)
|   Pressed( TO_THROW_1 )? throw() :(Init)
|   Pressed( TO_ACTION_1 )? Hit():( picked @)
|   True ? : ( picked @)

*(picked #)
|   Pressed( TO_STORE_2 )?:(Stored)
|   Pressed( TO_THROW_2 )? throw() :(Init)
|   Pressed( TO_ACTION_2 )? Hit():( picked #)
|   True ? : ( picked #)

*()
}


Bombe(Init){

* (Init):
|	Cell( H , @ ) ? pick():(picked @)
|   Cell( H , # ) ? pick():(picked #)
|   
|   True ? : ( )

*( Selected @ ) :
|

*( Selected # ) :
|

*( Stored ) :
|

*( to_pick ) :
|

*(picked @)
|   Pressed( TO_STORE_1 )?:(Stored)
|   Pressed( TO_THROW_1 ) /  Pressed( TO_ACTION_1 ) ? throw() :()
|   True ? : ( picked @)

*(picked #)
|   Pressed( TO_STORE_2 )?:(Stored)
|   Pressed( TO_THROW_2 ) /  Pressed( TO_ACTION_2 ) ? throw() :()
|   True ? : ( picked #)

*()
}

Teleporteur : ( init ){
    *( Init )
    |   Cell(H,@)? throw() : ( Init )
    |   Cell(H,#)? throw() : ( Init )
    // ????? | Cell( H, SelX )& Key() ? : ( Selected X)
    |   True ? : ( Init )

    *( Selected @ )
    |   Pressed( alpha ) ? pop() : ( Selected @)
    |   Pressed( beta ) ?  wizz() : ( Selected @)
    |   Pressed( UNSELECT )? : (Init)
    |   true ? : ( Selected @)

    *( Selected # )
    |   Pressed( alpha ) ? pop() : ( Selected #)
    |   Pressed( beta ) ?  wizz() : ( Selected #)
    |   Pressed( UNSELECT )? : (Init)
    |   true ? : ( Selected #)
}


Porte( Init ){
    *( Init )
    |   Cell(H,Sel @ ) & Key( gamma )? : Selected( @ )
    |   Cell(H,Sel # ) & Key( gamma )? : Selected( # )
    |   true ? : ( Init )

    *( Selected @ )
    |   Key(alpha)? pop() : (Selected @)
    |   Key(UNSELECTED)?:(Init)
    |   true ?:( Selected @ )

    *( Selected # )
    |   Key(alpha)? pop() : (Selected #)
    |   Key(UNSELECTED)?:(Init)
    |   true ?:( Selected # )

}